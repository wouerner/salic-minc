<?php
/**
 * Exemplo de Utilização do Layout - Planilha
 * @author emanuel.sampaio - Politec
 * @since 27/05/2011
 * @version 1.0
 * @package application
 * @subpackage application.views.scripts.manual-layout
 * @link http://salic.cultura.gov.br
 * @copyright © 2011 - Ministério da Cultura - Todos os direitos reservados.
 */

require_once "inc/menu.inc.phtml"; // menu lateral
?>

<!-- ========== INÍCIO BREADCRUMB (LINKS TOPO) ========== -->
<div id="breadcrumb">
	<ul>
		<li><a href="<?php echo $this->url(array('controller' => '', 'action' => ''), '', true); ?>" title="Ir para Página Inicial">Início</a></li>
		<li><a href="<?php echo $this->url(array('controller' => 'manual-layout', 'action' => ''), '', true); ?>" title="Ir para Exemplo de Utilização do Layout">Exemplo de Utilização do Layout</a></li>
		<li class="last">Planilha</li>
	</ul>
</div>
<!-- ========== FIM BREADCRUMB (LINKS TOPO) ========== -->



<!-- ========== INÍCIO TÍTULO ========== -->
<div id="titulo">
	<div>
		Planilha
		<span class="voltar"><a href="javascript:voltar();" title="Página Anterior">Voltar</a></span>
	</div>
</div>
<!-- ========== FIM TÍTULO ========== -->



<!-- ========== INÍCIO CONTEÚDO ========== -->
<div id="conteudo">

	<div class="miolo"><h4 class="centro">Planilha</h4></div>

	<!-- ========== INÍCIO PLANILHA ========== -->
	<?php
	// mesclagem de celulas
	$colspanGeral = 7;
	$colspanTotal = 4;
	?>

	<table class="tabela">
		<thead>
			<tr>
				<th colspan="<?php echo $colspanGeral; ?>">Planilha Orçamentária</th>
			</tr>
			<tr>
				<td colspan="<?php echo $colspanGeral; ?>">&nbsp;</td>
			</tr>
		</thead>

		<!-- INÍCIO MECANISMO -->
		<tbody class="PLAN_MECANISMO">
			<tr class="planilha_incentivo">
				<td colspan="<?php echo $colspanGeral; ?>"><div class="plan icn_menos"><span>Incentivo Fiscal 1</span></div></td>
			</tr>

			<!-- INÍCIO PRODUTO -->
			<tbody class="PLAN_PRODUTO">
				<tr class="planilha_produto">
					<td colspan="<?php echo $colspanGeral; ?>"><div class="plan icn_menos"><span>Produto 1.1</span></div></td>
				</tr>

				<!-- INÍCIO ETAPA -->
				<tbody class="PLAN_ETAPA">
					<tr class="planilha_etapa">
						<td colspan="<?php echo $colspanGeral; ?>"><div class="plan icn_menos"><span>Etapa 1.1.1</span></div></td>
					</tr>

					<!-- INÍCIO UF -->
					<tbody class="PLAN_UF">
						<tr class="planilha_uf">
							<td colspan="<?php echo $colspanGeral; ?>"><div class="plan icn_menos"><span>UF - Cidade 1.1.1.1</span></div></td>
						</tr>

						<!-- INÍCIO ITENS -->
						<tbody class="PLAN_ITEM registros">

							<tr>
								<th class="w50">&nbsp;</th>
								<th class="w80">Item</th>
								<th class="w80">Quant.</th>
								<th class="w80">Ocorr.</th>
								<th class="w200">Vl. Unitário</th>
								<th class="w200">Vl. Solicitado</th>
								<th>Justificativa</th>
							</tr>

							<tr>
								<td>&nbsp;</td>
								<td class="centro">Teste 1</td>
								<td class="centro">100</td>
								<td class="centro">5</td>
								<td class="direita red">R$ 1.200,00</td>
								<td class="direita blue">R$ 2.100,00</td>
								<td>Teste justificativa</td>
							</tr>
							<tr class="fundo_linha2">
								<td>&nbsp;</td>
								<td class="centro">Teste 2</td>
								<td class="centro">50</td>
								<td class="centro">2</td>
								<td class="direita red">R$ 3.200,00</td>
								<td class="direita blue">R$ 2.100,00</td>
								<td>Teste justificativa</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
								<td class="centro">Teste 3</td>
								<td class="centro">30</td>
								<td class="centro">20</td>
								<td class="direita red">R$ 4.200,00</td>
								<td class="direita blue">R$ 3.100,00</td>
								<td>Teste justificativa</td>
							</tr>

						</tbody>
						<!-- FIM ITENS -->

						<!-- INÍCIO TOTAL UF -->
						<tr class="total_planilha_uf">
							<td colspan="<?php echo $colspanTotal; ?>">Total UF 1.1.1.1</td>
							<td class="direita">R$ 29.000.000.000,00</td>
							<td class="direita">R$ 10.000,00</td>
							<td>&nbsp;</td>
						</tr>
						<!-- FIM TOTAL UF -->

					</tbody>
					<!-- FIM UF -->

					<!-- INÍCIO TOTAL ETAPA -->
					<tr class="total_planilha_etapa">
						<td colspan="<?php echo $colspanTotal; ?>">Total Etapa 1.1.1</td>
						<td class="direita">R$ 10.000,00</td>
						<td class="direita">R$ 10.000,00</td>
						<td>&nbsp;</td>
					</tr>
					<!-- FIM TOTAL ETAPA -->

				</tbody>
				<!-- FIM ETAPA -->

				<!-- INÍCIO TOTAL PRODUTO -->
				<tr class="total_planilha_produto">
					<td colspan="<?php echo $colspanTotal; ?>">Total Produto 1.1</td>
					<td class="direita">R$ 10.000,00</td>
					<td class="direita">R$ 10.000,00</td>
					<td>&nbsp;</td>
				</tr>
				<!-- FIM TOTAL PRODUTO -->

			</tbody>
			<!-- FIM PRODUTO -->

			<!-- INÍCIO TOTAL MECANISMO -->
			<tr class="total_planilha_incentivo">
				<td colspan="<?php echo $colspanTotal; ?>">Total Incentivo Fiscal 1</td>
				<td class="direita">R$ 29.000.000,00</td>
				<td class="direita">R$ 10.000,00</td>
				<td>&nbsp;</td>
			</tr>
			<!-- FIM TOTAL MECANISMO -->

		</tbody>
		<!-- FIM MECANISMO -->

	</table>
	<!-- ========== FIM PLANILHA ========== -->



<script type="text/javascript">
/**
 * Função para abrir e fechar a planilha orçamentária
 */
function planilha_custos(elemento, tipo)
{
	if (tipo == 'MECANISMO')
	{
		var PLAN_MECANISMO = $(elemento).parents('tbody');

alert (   $(PLAN_MECANISMO).next('.total_planilha_incentivo').tagName   );

		var PLAN_PRODUTO   = $(PLAN_MECANISMO).next('tbody');
		var PLAN_ETAPA     = $(PLAN_PRODUTO).next('tbody');
		var PLAN_UF        = $(PLAN_ETAPA).next('tbody');
		var PLAN_ITEM      = $(PLAN_UF).next('tbody');

		if ($(elemento).find('div').attr('class') == 'plan icn_mais')
		{
			$(elemento).find('div').removeClass('icn_mais');
			$(elemento).find('div').addClass('icn_menos');

			$(PLAN_PRODUTO).removeClass('sumir');
			$(PLAN_ETAPA).removeClass('sumir');
			$(PLAN_UF).removeClass('sumir');
			$(PLAN_ITEM).removeClass('sumir');
		}
		else
		{
			$(elemento).find('div').removeClass('icn_menos');
			$(elemento).find('div').addClass('icn_mais');

			$(PLAN_PRODUTO).addClass('sumir');
			$(PLAN_ETAPA).addClass('sumir');
			$(PLAN_UF).addClass('sumir');
			$(PLAN_ITEM).addClass('sumir');
		}
		//$(PLAN_PRODUTO).toggle();
	}
	else if (tipo == 'PRODUTO')
	{
		var PLAN_PRODUTO   = $(elemento).parents('tbody');
		var PLAN_ETAPA     = $(PLAN_PRODUTO).next('tbody');
		var PLAN_UF        = $(PLAN_ETAPA).next('tbody');
		var PLAN_ITEM      = $(PLAN_UF).next('tbody');

		if ($(elemento).find('div').attr('class') == 'plan icn_mais')
		{
			$(elemento).find('div').removeClass('icn_mais');
			$(elemento).find('div').addClass('icn_menos');

			$(PLAN_ETAPA).removeClass('sumir');
			$(PLAN_UF).removeClass('sumir');
			$(PLAN_ITEM).removeClass('sumir');
		}
		else
		{
			$(elemento).find('div').removeClass('icn_menos');
			$(elemento).find('div').addClass('icn_mais');

			$(PLAN_ETAPA).addClass('sumir');
			$(PLAN_UF).addClass('sumir');
			$(PLAN_ITEM).addClass('sumir');
		}
		//$(PLAN_UF).toggle();
	}
	else if (tipo == 'ETAPA')
	{
		var PLAN_ETAPA     = $(elemento).parents('tbody');
		var PLAN_UF        = $(PLAN_ETAPA).next('tbody');
		var PLAN_ITEM      = $(PLAN_UF).next('tbody');

		if ($(elemento).find('div').attr('class') == 'plan icn_mais')
		{
			$(elemento).find('div').removeClass('icn_mais');
			$(elemento).find('div').addClass('icn_menos');

			$(PLAN_UF).removeClass('sumir');
			$(PLAN_ITEM).removeClass('sumir');
		}
		else
		{
			$(elemento).find('div').removeClass('icn_menos');
			$(elemento).find('div').addClass('icn_mais');

			$(PLAN_UF).addClass('sumir');
			$(PLAN_ITEM).addClass('sumir');
		}
	}
	else if (tipo == 'UF')
	{
		var PLAN_UF        = $(elemento).parents('tbody');
		var PLAN_ITEM      = $(PLAN_UF).next('tbody');

		if ($(elemento).find('div').attr('class') == 'plan icn_mais')
		{
			$(elemento).find('div').removeClass('icn_mais');
			$(elemento).find('div').addClass('icn_menos');

			$(PLAN_ITEM).removeClass('sumir');
		}
		else
		{
			$(elemento).find('div').removeClass('icn_menos');
			$(elemento).find('div').addClass('icn_mais');

			$(PLAN_ITEM).addClass('sumir');
		}
	}

} // fecha função planilha_custos()
</script>

</div>
<!-- ========== FIM CONTEÚDO ========== -->



<!-- ========== INÍCIO RODAPÉ DO CONTEÚDO ========== -->
<div id="rodapeConteudo"><span></span></div>
<!-- ========== FIM RODAPÉ DO CONTEÚDO ========== -->

<br clear="all" />