<?php
/**
 * Exemplo de Utilização do Layout
 * @author Tarcísio Angelo - XTI
 * @since 12/01/2012
 * @version 1.0
 * @package application
 * @subpackage application.views.scripts.comunicados
 * @link http://salic.cultura.gov.br
 * @copyright © 2011 - Ministério da Cultura - Todos os direitos reservados.
 */

?>

<script type="text/javascript">
function paginar(pag){
        $("#pag").val(pag);
        jqAjaxForm(document.getElementById("frmPaginacao"), "resultadoConsulta");
        $("#resultadoConsulta").html("");
        $("#resultadoConsulta").html('<br><center>Aguarde, carregando dados...<br><img src="<?php echo $this->baseUrl(); ?>/public/img/ajax.gif" /></center><br>');
    }

    function ordenar(campo, tipo){
        $("#ordenacao").val(campo);
        $("#tipoOrdenacao").val(tipo);
        paginar(1);
    }
</script>

<?php if($this->total != 0):?>

<?php foreach($this->registros as $c): ?>
	
	<table class="tabela">
		<tr>
			<th align="left">Sistema: <?php echo $c->stOpcao == 1 ? 'Proposta':'Salic'; ?></th>
			<th align="left" width="300">Início da vigência: <?php echo $c->dtInicioVigenciaPT; ?></th>
			<th align="left" width="300">Fim da vigência: <?php echo $c->dtTerminoVigenciaPT; ?></th>
		</tr>
		<tr>
			<td colspan="3" class="fundo_linha3" align="center">Comunicado</td>
		</tr>
		<tr>
			<td colspan="3"><?php echo $c->Comunicado; ?></td>
		</tr>
		<tr>
			<td colspan="3" align="center">
				<input type="button" value="" class="btn_editar" onclick="redirecionar('<?php echo $this->url(array('controller' => 'comunicados', 'action' => 'editar','idComunicado' => $c->idComunicado, 'url'=> 'ativos'),'',true); ?>');">
			</td>
		</tr>
	</table>
	<br />
<?php endforeach; ?>

<!-- ========== PAGINAÇ?O ========== -->
<form action="<?php echo $this->url(array('controller' => 'comunicados', 'action' => 'listar-comunicados')); ?>" method="post" name="frmPaginacao" id="frmPaginacao">
<?php foreach($this->parametrosBusca as $name=>$value):?>
    <?php if(!is_array($value)): ?>
    <input type="hidden" name="<?php echo $name?>" id="<?php echo $name?>" value="<?php echo $value?>"/>
    <?php else: ?>
        <?php foreach($value as $valor):?>
            <input type="hidden" name="<?php echo $name?>[]" id="<?php echo $name?>" value="<?php echo $valor?>"/>
        <?php endforeach; ?>
    <?php endif; ?>
<?php endforeach; ?>
    <?php if(empty($this->parametrosBusca["pag"])):?>
    <input type="hidden" name="pag" id="pag" value="<?php echo $this->pag; ?>"/>
    <?php endif; ?>
</form>
<table class="tabela">
	<tr>
	    <td align="center">
	        Exibindo <b><?php echo $this->inicio; ?></b> de um total de <b><?php echo $this->total; ?></b><br>
	        <?php if($this->pag<=1): ?>
	        <input type="button" style="width: 88px" class="btn_p_anterior-off" id="btn_p_anterior">
	        <?php else: ?>
	        <input type="button" style="width: 88px" class="btn_inicio" id="btn_inicio" onclick="paginar('1')"/>
	        <input type="button" style="width: 88px" class="btn_p_anterior" id="btn_p_anterior" onclick="paginar('<?php echo ($this->pag > 1)?$this->pag-1:1; ?>')"/>
	        <?php endif; ?>
	        <select name="pagina" id="pagina" class="input_simples" onchange="paginar(this.value)">
	            <?php for($i=1; $i<$this->totalPag+1; $i++): ?>
	            <option value="<?php echo $i; ?>" <?php if($i == $this->pag){ echo " selected='selected' "; } ?>><?php echo $i; ?></option>
	            <?php endfor; ?>
	        </select>
	        <?php if($this->pag+1 > $this->totalPag): ?>
	        <input type="button" style="width: 88px" class="btn_p_proximo-off" id="btn_p_proximo"/>
	        <?php else: ?>
	        <input type="button" style="width: 88px" class="btn_p_proximo" id="btn_p_proximo" onclick="paginar('<?php echo ($this->pag < $this->totalPag)?$this->pag+1:$this->totalPag; ?>')"/>
	        <input type="button" style="width: 88px" class="btn_ultimo" id="btn_ultimo" onclick="paginar('<?php echo $this->totalPag; ?>')"/>
	        <?php endif; ?>
	    </td>
	</tr>
</table>
<!-- ========== FIM PAGINAÇ?O ========== -->

<?php else:?>
<table class="tabela">
  <tr>
    <td align="center">Nenhum registro encontrado!</td>
  </tr>
</table>

<?php endif;?>

