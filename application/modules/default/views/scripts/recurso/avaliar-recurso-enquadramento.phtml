<div id="alerta"></div>
<div class="container">
    <h4>Avalia&ccedil;&atilde;o de Recurso</h4>
    <div class="row">
        <table>
            <tr>
                <th >PRONAC</th>
                <th >NOME DO PROJETO</th>
            </tr>
            <tr>
                <td align="center"><?php echo $this->projeto->pronac; ?></td>
                <td align="center"><?php echo $this->projeto->NomeProjeto; ?></td>
            </tr>
        </table>
        <table>
            <tr>
                <th colspan="4">SOLICITA&Ccedil;&Atilde;O</th>
            </tr>
            <tr>
                <td colspan="4" class="destacar bold" align="center">Descrição do Recurso</td>
            </tr>
            <tr>
                <td colspan="4"><?php echo $this->recurso->dsSolicitacaoRecurso; ?></td>
            </tr>
            <tr>
                <td class="destacar bold w150" align="center">Tipo do Recurso</td>
                <td><?php echo $this->recurso->tpRecursoDesc; ?></td>
                <td class="destacar bold w150" align="center">Tipo do Solicitação</td>
                <td><?php echo $this->recurso->tpSolicitacaoDesc; ?></td>
            </tr>
        </table>
    </div>
    <div class="row">
        <form name="formAvaliacao" id="formAvaliacao" action="<?php echo $this->Url(array('module' => 'default', 'controller' => 'recurso', 'action' => 'salvar-avaliacao-enquadramento')); ?>" method="post">
            <p>RESPOSTA</p>
            <p>
                <input id="stAtendimento1" type="radio" class="" value="D" name="stAtendimento" checked="checked">
                <label for="stAtendimento1"> Deferir</label>
            </p>
            <p>
                <input id="stAtendimento2" type="radio" class="" value="I" name="stAtendimento">
                <label for="stAtendimento2">Indeferir</label>
            </p>
            <div class="row">
                <div class="input-field col s12">
                    <br />
                    <label class="active" for="dsAvaliacao">Avaliação</label>
                    <br/>
                    <textarea name="dsAvaliacao" id="dsAvaliacao" class="editor materialize-textarea"></textarea>
                    <br />
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12 center-align">
                    <input type="hidden" name="idRecurso" value="<?php echo $this->recurso->idRecurso; ?>">
                    <button name="btn_salvar" id="btn_salvar" class="tooltipped btn waves-effect waves-light" data-tooltip="Salvar Avaliação" type="submit" >Salvar
                        <i class="material-icons right">send</i>
                    </button>
                    <a href="<?php echo $this->url(array('module' => 'default', 'controller' => 'recurso', 'action' => 'recurso-enquadramento'))?>" id="btn_voltar" class="red-text btn waves-effect waves-dark white tooltipped" data-tooltip="Cancelar Avaliação" type="reset" name="action">Cancelar
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>

<script type="text/javascript" src="/public/js/jquery.validate.addMethod.js"></script>
<script>
    $(document).ready(function(){

        $('#formAvaliacao').validate({
            rules : {
                dsAvaliacao:{
                    requiredTinyMice: true
                }
            },
            messages:{
                dsAvaliacao:{
                    required:""
                }
            },
            invalidHandler: function(event, validator) {
                Materialize.toast('Campo "Avaliação" &eacute; obrigat&oacute;rio!', 4000);
            },
            submitHandler: function (form) {
                    $("#container-progress").show();
                    form.submit();
                }
        });
        $("#dsAvaliacao").editorRico({altura: 200});
    });
</script>
